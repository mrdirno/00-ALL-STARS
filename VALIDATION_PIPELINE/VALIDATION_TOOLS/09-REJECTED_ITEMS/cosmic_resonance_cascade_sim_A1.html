<!DOCTYPE html>
<!--
    Resonance is All You Need: Cosmic Resonance Cascade Simulation
    Concept & Transformation by Agent 1 (Gemini 2.5 Pro) based on 'nonlinear_wave_filament_sim_A1.html'.
    Original Base Structure by:
    - Aldrin Payopay (Lead Researcher & Visionary)
    - Claude Opus 4 (AI Research Assistant & Code Architect) 
    - Gemini 2.5 Pro (AI Research Assistant & Mathematical Modeling)
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Aldrin Payopay, Claude Opus 4, Gemini 2.5 Pro, Agent 1">
    <meta name="description" content="Cosmic Resonance Cascade Simulation - Visualizing large-scale structure formation through cascading wave interactions. Original research by Aldrin Payopay with AI Assistants, transformed by Agent 1.">
    <meta name="keywords" content="Aldrin Payopay, cosmic resonance, wave propagation, structure formation, particle simulation, three.js, cascading waves, Agent 1">
    <meta name="creator" content="Aldrin Payopay (Human Researcher), Claude Opus 4 (AI Assistant), Gemini 2.5 Pro (AI Assistant), Agent 1 (AI Transformation)">
    <title>Cosmic Resonance Cascade Simulation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script> 
    <script src="https://cdn.jsdelivr.net/npm/three/examples/js/controls/OrbitControls.js"></script>
    <style>
        /* CSS Styling - Unchanged from base */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; 
            background: #000000; 
            color: #ffffff;
            overflow: hidden; 
            position: relative;
        }
        #container { 
            width: 100vw; 
            height: 100vh; 
            display: block;
            background: radial-gradient(ellipse at center, #101020 0%, #000000 100%); 
        }
        .ui-panel {
            position: absolute;
            background: rgba(25, 25, 45, 0.15); 
            backdrop-filter: blur(25px) saturate(180%);
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            border: 1px solid rgba(100, 100, 200, 0.15); 
            border-radius: 20px;
            padding: 24px;
            box-shadow: 
                0 20px 50px rgba(0, 0, 0, 0.4), 
                inset 0 1px 0 rgba(255, 255, 255, 0.05); 
            transition: all 0.3s ease;
        }
        .ui-panel:hover {
            background: rgba(35, 35, 55, 0.2);
            box-shadow: 
                0 25px 60px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.08);
        }
        #controls-panel { 
            top: 20px; 
            left: 20px; 
            width: 380px; 
            z-index: 10;
            opacity: 0;
            transform: translateX(-20px);
            animation: slideInLeft 0.6s ease forwards;
            animation-delay: 0.3s;
            max-height: calc(100vh - 40px); 
            overflow-y: auto; 
            padding-right: 10px; 
        }
        #controls-panel::-webkit-scrollbar { width: 8px; }
        #controls-panel::-webkit-scrollbar-track { background: rgba(25, 25, 45, 0.1); border-radius: 10px;}
        #controls-panel::-webkit-scrollbar-thumb { background: linear-gradient(135deg, #8A2BE2 0%, #4A00E0 100%); border-radius: 10px; border: 1px solid rgba(25, 25, 45, 0.2); }
        #controls-panel::-webkit-scrollbar-thumb:hover { background: linear-gradient(135deg, #9F50E8 0%, #5D1DE0 100%); }
        #controls-panel { scrollbar-width: thin; scrollbar-color: #8A2BE2 rgba(25, 25, 45, 0.1); }
        @keyframes slideInLeft { to { opacity: 1; transform: translateX(0); } }
        #stats-bar { 
            bottom: 20px; 
            left: 50%; 
            transform: translateX(-50%) translateY(20px);
            padding: 16px 32px;
            z-index: 10;
            display: flex;
            gap: 24px;
            justify-content: center;
            align-items: center;
            opacity: 0;
            animation: slideInUp 0.6s ease forwards;
            animation-delay: 0.5s;
        }
        @keyframes slideInUp { to { opacity: 1; transform: translateX(-50%) translateY(0); } }
        .stat-item { display: flex; flex-direction: column; align-items: center; gap: 4px; }
        .stat-label { font-size: 0.75rem; color: rgba(200, 200, 255, 0.6); text-transform: uppercase; letter-spacing: 0.05em; }
        .stat-value { font-size: 1.25rem; font-weight: 600; color: #fff; background: linear-gradient(135deg, #8A2BE2 0%, #4A00E0 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; } 
        .control-group { margin-bottom: 20px; }
        #controls-panel .control-group { padding-right: 14px; }
        #controls-panel h2 { padding-right: 14px; }
        .control-group label { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; font-size: 0.875rem; font-weight: 500; color: rgba(220, 220, 255, 0.9); text-transform: uppercase; letter-spacing: 0.05em; }
        .control-group label[title] { cursor: help; }
        .control-value { font-size: 1rem; color: #8A2BE2; font-weight: 600; }
        .control-group small { display: block; color: rgba(200, 200, 255, 0.5); font-size: 0.75rem; font-weight: 400; text-transform: none; letter-spacing: normal; margin-top: -8px; margin-bottom: 12px; }
        .info-icon { font-size: 0.7em; color: rgba(138, 43, 226, 0.7); font-weight: 400; margin-left: 8px; cursor: help; transition: color 0.2s ease, transform 0.2s ease; display: inline-block; }
        .info-icon:hover { color: rgba(138, 43, 226, 1); transform: scale(1.1); }
        input[type="range"] { width: 100%; height: 6px; background: rgba(200, 200, 255, 0.15); border-radius: 3px; outline: none; -webkit-appearance: none; cursor: pointer; transition: background 0.3s ease; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 18px; height: 18px; background: linear-gradient(135deg, #8A2BE2 0%, #4A00E0 100%); border-radius: 50%; cursor: pointer; box-shadow: 0 2px 10px rgba(138, 43, 226, 0.5); transition: all 0.3s ease; }
        input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.2); box-shadow: 0 4px 20px rgba(138, 43, 226, 0.8); }
        input[type="range"]::-moz-range-thumb { width: 18px; height: 18px; background: linear-gradient(135deg, #8A2BE2 0%, #4A00E0 100%); border-radius: 50%; cursor: pointer; border: none; box-shadow: 0 2px 10px rgba(138, 43, 226, 0.5); }
        select, .ui-input-number { width: 100%; padding: 12px 16px; background: rgba(35, 35, 55, 0.1); border: 1px solid rgba(100, 100, 200, 0.2); border-radius: 12px; color: #fff; font-size: 0.875rem; font-weight: 500; cursor: pointer; outline: none; transition: all 0.3s ease; -moz-appearance: textfield; /* Firefox */ }
        select:hover, .ui-input-number:hover { background: rgba(45, 45, 65, 0.15); border-color: rgba(120, 120, 220, 0.3); }
        select:focus, .ui-input-number:focus { border-color: #8A2BE2; box-shadow: 0 0 0 3px rgba(138, 43, 226, 0.2); }
        .ui-input-number::-webkit-outer-spin-button,
        .ui-input-number::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        button { width: 100%; padding: 14px 20px; background: linear-gradient(135deg, #8A2BE2 0%, #4A00E0 100%); border: none; border-radius: 12px; color: white; font-size: 0.875rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 0.05em; position: relative; overflow: hidden; }
        button::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: rgba(255, 255, 255, 0.15); transition: left 0.5s ease; }
        button:hover::before { left: 100%; }
        button:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(138, 43, 226, 0.4); }
        button:active { transform: translateY(0); }
        button.active { background: linear-gradient(135deg, #CF63CF 0%, #f5576c 100%); } 
        h2 { font-size: 1.5rem; font-weight: 700; margin-bottom: 24px; background: linear-gradient(135deg, #8A2BE2 0%, #4A00E0 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-align: center; letter-spacing: -0.02em; }
        #initialization-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(ellipse at center, #101020 0%, #000000 100%);
            display: flex; justify-content: center; align-items: center; flex-direction: column;
            z-index: 1000; padding: 20px;
        }
        .init-content { text-align: center; max-width: 600px; animation: fadeInScale 0.8s ease; }
        @keyframes fadeInScale { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        .init-title { font-size: 2.8rem; font-weight: 800; margin-bottom: 16px; background: linear-gradient(135deg, #8A2BE2 0%, #4A00E0 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; letter-spacing: -0.03em; line-height: 1.2; }
        .init-subtitle { font-size: 1.2rem; color: rgba(220, 220, 255, 0.7); margin-bottom: 40px; font-weight: 300; }
        #start-button { padding: 18px 48px; font-size: 1.125rem; background: linear-gradient(135deg, #8A2BE2 0%, #4A00E0 100%); border: none; border-radius: 30px; color: white; font-weight: 600; cursor: pointer; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 0.1em; box-shadow: 0 10px 40px rgba(138, 43, 226, 0.4); position: relative; overflow: hidden; }
        #start-button:hover { transform: translateY(-3px); box-shadow: 0 15px 50px rgba(138, 43, 226, 0.6); }
        #start-button:disabled { background: #2a2a2a; cursor: not-allowed; box-shadow: none; }
        #status-message { color: rgba(200, 200, 255, 0.6); margin-top: 20px; font-size: 0.875rem; }
        #error-message { color: #f87171; margin-top: 15px; font-weight: 500; }
        .loading-dots { display: inline-flex; gap: 4px; }
        .dot { width: 8px; height: 8px; background: #8A2BE2; border-radius: 50%; animation: loadingDot 1.4s ease-in-out infinite; }
        .dot:nth-child(2) { animation-delay: 0.2s; }
        .dot:nth-child(3) { animation-delay: 0.4s; }
        @keyframes loadingDot { 0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; } 40% { transform: scale(1.2); opacity: 1; } }
        .sound-indicator { position: absolute; top: 20px; right: 20px; width: 60px; height: 60px; z-index: 10; opacity: 0; animation: fadeIn 0.6s ease forwards; animation-delay: 0.7s; }
        @keyframes fadeIn { to { opacity: 1; } }
        .sound-waves { position: relative; width: 100%; height: 100%; }
        .wave { position: absolute; border: 2px solid rgba(138, 43, 226, 0.6); border-radius: 50%; opacity: 0; animation: soundWave 2s ease-out infinite; }
        .wave:nth-child(2) { animation-delay: 0.5s; } .wave:nth-child(3) { animation-delay: 1s; }
        @keyframes soundWave { 0% { width: 20px; height: 20px; top: 20px; left: 20px; opacity: 1; } 100% { width: 60px; height: 60px; top: 0; left: 0; opacity: 0; } }
        .sound-icon { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 24px; height: 24px; fill: #8A2BE2; }
        .instructions { position: absolute; bottom: 20px; right: 20px; background: rgba(25, 25, 45, 0.1); backdrop-filter: blur(15px); padding: 16px 20px; border-radius: 12px; border: 1px solid rgba(100, 100, 200, 0.1); font-size: 0.75rem; color: rgba(200, 200, 255, 0.7); z-index: 10; opacity: 0; animation: fadeIn 0.6s ease forwards; animation-delay: 0.9s; }
        .research-watermark { position: fixed; bottom: 5px; left: 5px; font-size: 8px; color: rgba(138, 43, 226, 0.1); z-index: 1; pointer-events: none; font-family: monospace; transform: rotate(-90deg); transform-origin: 0 0; }
        .research-watermark div { white-space: nowrap; }
        .pulse-indicator { width: 20px; height: 20px; background-color: #8A2BE2; border-radius: 50%; transition: all 0.3s ease; }
        .pulse-active { animation: pulseAnim 0.7s ease-out; }
        @keyframes pulseAnim { 0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(138, 43, 226, 0.7); } 50% { transform: scale(1.5); box-shadow: 0 0 10px 15px rgba(138, 43, 226, 0); } 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(138, 43, 226, 0); } }
        #fullscreen-button {
            position: absolute;
            top: 20px;
            right: 100px; 
            padding: 10px 15px;
            background: rgba(25, 25, 45, 0.2);
            border: 1px solid rgba(100, 100, 200, 0.15);
            color: white;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.8rem;
            z-index: 10;
            opacity:0; animation: fadeIn 0.6s ease forwards; animation-delay: 0.8s;
        }
         #fullscreen-button:hover { background: rgba(35, 35, 55, 0.3); }
    </style>
</head>
<body>
    <div id="container"></div>

    <div id="initialization-overlay">
        <div class="init-content">
            <div class="init-title">Cosmic Resonance Cascade</div>
            <div class="init-subtitle">Visualizing large-scale structure through interacting resonant fields and cascading energy. <br>A conceptual model by Agent 1.</div>
            <button id="start-button">Initialize Simulation</button>
            <div id="status-message">Loading assets... <span class="loading-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></span></div>
            <div id="error-message" style="display:none;"></div>
        </div>
    </div>
    
    <div id="controls-panel" class="ui-panel">
        <h2>Resonance Parameters</h2>
        <div class="control-group">
            <label for="numNodesSlider">Resonance Nodes: <span id="numNodesValue" class="control-value">5</span> <span class="info-icon" title="Number of primary resonance nodes. Requires re-init.">ℹ️</span></label>
            <input type="range" id="numNodesSlider" min="1" max="10" step="1" value="5">
            <small>Primary sources of resonant energy fields.</small>
        </div>
        <div class="control-group">
            <label for="nodeMeanFrequencySlider">Node Mean Freq: <span id="nodeMeanFrequencyValue" class="control-value">3.0</span> Hz <span class="info-icon" title="Mean frequency for resonance nodes.">ℹ️</span></label>
            <input type="range" id="nodeMeanFrequencySlider" min="0.1" max="20" step="0.1" value="3.0">
            <small>Average frequency around which nodes resonate.</small>
        </div>
        <div class="control-group">
            <label for="nodeAmplitudeSlider">Node Amplitude: <span id="nodeAmplitudeValue" class="control-value">2.0</span> <span class="info-icon" title="Base strength of resonance node fields.">ℹ️</span></label>
            <input type="range" id="nodeAmplitudeSlider" min="0.1" max="10.0" step="0.1" value="2.0">
            <small>Controls the intensity of primary resonance fields.</small>
        </div>
        <div class="control-group">
            <label for="nodeRadiusSlider">Node Influence Radius: <span id="nodeRadiusValue" class="control-value">150</span> <span class="info-icon" title="Effective radius of influence for each resonance node.">ℹ️</span></label>
            <input type="range" id="nodeRadiusSlider" min="30" max="400" step="10" value="150">
            <small>Spatial extent of each node's primary field.</small>
        </div>
         <div class="control-group">
            <label for="cascadeStrengthSlider">Cascade Strength: <span id="cascadeStrengthValue" class="control-value">0.05</span> <span class="info-icon" title="Strength of secondary waves emitted by excited particles.">ℹ️</span></label>
            <input type="range" id="cascadeStrengthSlider" min="0.0" max="0.5" step="0.005" value="0.05">
            <small>How strongly energized particles create secondary resonances.</small>
        </div>
        <div class="control-group">
            <label for="particleCouplingSlider">Particle Coupling: <span id="particleCouplingValue" class="control-value">0.8</span> <span class="info-icon" title="How strongly particles are affected by resonance fields.">ℹ️</span></label>
            <input type="range" id="particleCouplingSlider" min="0.01" max="2.0" step="0.01" value="0.8">
            <small>Sensitivity of particles to the resonant fields.</small>
        </div>
        <div class="control-group">
            <label for="fieldDampingSlider">Field Damping: <span id="fieldDampingValue" class="control-value">0.02</span> <span class="info-icon" title="Rate at which resonant energy dissipates in space.">ℹ️</span></label>
            <input type="range" id="fieldDampingSlider" min="0.001" max="0.1" step="0.001" value="0.02">
            <small>Controls how quickly wave energy fades with distance.</small>
        </div>

        <h2>Particle & System</h2>
        <div class="control-group">
            <label for="particleCountSlider">Particle Count: <span id="particleCountValue" class="control-value">50000</span> <span class="info-icon" title="Total particles. Requires re-init.">ℹ️</span></label>
            <input type="range" id="particleCountSlider" min="1000" max="250000" step="1000" value="50000">
            <small>More particles allow for finer structures.</small>
        </div>
        <div class="control-group">
            <label for="centralMassStrengthSlider">Central Mass Strength: <span id="centralMassStrengthValue" class="control-value">20</span> <span class="info-icon" title="Strength of the central attractor/low-frequency resonator.">ℹ️</span></label>
            <input type="range" id="centralMassStrengthSlider" min="0" max="500" step="5" value="20">
            <small>Influence of the central point (gravity/resonance).</small>
        </div>
        <div class="control-group">
            <button id="reinitializeButton">Re-initialize Simulation</button>
            <small>Applies particle count and node changes, resets simulation.</small>
        </div>
        <div class="control-group">
            <button id="toggleSoundButton">Sound: ON</button>
            <small>Toggles audio feedback.</small>
        </div>
        <div class="control-group">
            <button id="stopButton">Stop Simulation</button>
             <small>Pauses the animation and audio.</small>
        </div>
    </div>

    <div id="stats-bar" class="ui-panel">
        <div class="stat-item">
            <span class="stat-label">Particles</span>
            <span id="particleStat" class="stat-value">50000</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">FPS</span>
            <span id="fpsStat" class="stat-value">0</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">Time</span>
            <span id="timeStat" class="stat-value">0.0s</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">Energy</span>
            <span id="energyStat" class="stat-value">0.0</span>
        </div>
    </div>

    <div class="sound-indicator">
        <div class="sound-waves">
            <div class="wave"></div>
            <div class="wave"></div>
            <div class="wave"></div>
        </div>
        <svg class="sound-icon" viewBox="0 0 24 24">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
    </div>

    <button id="fullscreen-button" onclick="toggleFullscreen()">Fullscreen</button>

    <div class="instructions">
        Click and drag to rotate • Scroll to zoom • Space to pause
    </div>

    <div class="research-watermark">
        <div>COSMIC RESONANCE CASCADE SIMULATION © 2025 ALDRIN PAYOPAY</div>
        <div>AI RESEARCH COLLABORATION: CLAUDE OPUS 4 + GEMINI 2.5 PRO + AGENT 1</div>
        <div>BREAKTHROUGH RESEARCH IN LARGE-SCALE STRUCTURE FORMATION</div>
    </div>

    <script>
        // Placeholder JavaScript for basic functionality
        console.log("Cosmic Resonance Cascade Simulation - Agent 1 Transformation");
        
        document.getElementById('start-button').addEventListener('click', function() {
            document.getElementById('initialization-overlay').style.display = 'none';
            console.log("Simulation started");
        });
        
        // Basic FPS counter simulation
        let fps = 0;
        setInterval(() => {
            fps = Math.floor(Math.random() * 60 + 20);
            document.getElementById('fpsStat').textContent = fps;
            
            const time = (Date.now() / 1000).toFixed(1);
            document.getElementById('timeStat').textContent = time + 's';
            
            const energy = (Math.random() * 100).toFixed(1);
            document.getElementById('energyStat').textContent = energy;
        }, 100);
        
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }
    </script>

</body>
</html>
 